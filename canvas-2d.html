<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.png"><title>Vuevos (Vue + huevos)</title><meta name="title" content="Vuevos (Vue + huevos)"><meta name="description" content="Create a fried egg across various rendering Web APIs.
    Use Vue framework to navigate from one concept to another. Each fried egg (and its code) is encapsulated and available in its own component."><meta property="og:type" content="website"><meta property="og:url" content="https://vuevos.com"><meta property="og:title" content="Vuevos (Vue + huevos)"><meta property="og:description" content="Create a fried egg across various rendering Web APIs.
    Use Vue framework to navigate from one concept to another. Each fried egg (and its code) is encapsulated and available in its own component."><meta property="og:image" content="https://vuevos.com/social-wide.png"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://vuevos.com"><meta property="twitter:title" content="Vuevos (Vue + huevos)"><meta property="twitter:description" content="Create a fried egg across various rendering Web APIs.
    Use Vue framework to navigate from one concept to another. Each fried egg (and its code) is encapsulated and available in its own component."><meta property="twitter:image" content="https://vuevos.com/social-wide.png"><link href="/css/canvas-2d.css" rel="prefetch"><link href="/css/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.css" rel="prefetch"><link href="/css/css.css" rel="prefetch"><link href="/css/svg-path.css" rel="prefetch"><link href="/css/svg.css" rel="prefetch"><link href="/css/webgl-2d.css" rel="prefetch"><link href="/css/webgl-3d.css" rel="prefetch"><link href="/js/canvas-2d.js" rel="prefetch"><link href="/js/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.js" rel="prefetch"><link href="/js/css.js" rel="prefetch"><link href="/js/svg-path.js" rel="prefetch"><link href="/js/svg.js" rel="prefetch"><link href="/js/webgl-2d.js" rel="prefetch"><link href="/js/webgl-2d~webgl-3d.js" rel="prefetch"><link href="/js/webgl-3d.js" rel="prefetch"><link href="/css/app.css" rel="preload" as="style"><link href="/css/chunk-vendors.css" rel="preload" as="style"><link href="/js/app.js" rel="preload" as="script"><link href="/js/chunk-vendors.js" rel="preload" as="script"><link href="/css/chunk-vendors.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/css/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.css"><script charset="utf-8" src="/js/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.js"></script><link rel="stylesheet" type="text/css" href="/css/canvas-2d.css"><script charset="utf-8" src="/js/canvas-2d.js"></script><script data-ad-client="ca-pub-9675727214970019" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XFKCM6QVRL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XFKCM6QVRL');
</script></head><body><div id="vuevos"><div class="nav-bar"><div class="splash-blur-back"></div><div class="links"><span><a href="/" class="router-link-active"><svg width="30px" height="30px" viewBox="0 0 44 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="vuevos-icon"><title>Vuevos.com</title><defs><filter id="shadow"><feDropShadow dx="0" dy="0" stdDeviation="0.3"></feDropShadow></filter></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path filter="url(#shadow)" d="M22.5,26.6780822 L32.4790419,9 L39,9 L22.5,38 L6,9 L12.5209581,9 L22.5,26.6780822 Z" fill="#FBF0F0"></path><path filter="url(#shadow)" d="M33,9 L22.5,28 L12,9 L19.5,9 L23,16 L26.5,9 L33,9 Z" fill="#FFD700"></path></g></g></svg></a> | </span><a href="/html-css" class="">CSS</a> | <a href="/svg-path" class="">SVG Path</a> | <a href="/svg-filters" class="">SVG Filters</a> | <a href="/canvas-2d" aria-current="page" class="router-link-exact-active router-link-active">Canvas</a> | <a href="/webgl-2d" class="">WebGL 2D</a> | <a href="/webgl-3d" class="">WebGL 3D</a></div></div><div class="view view-canvas-2d"><div class="title-box splash-blur"><div class="splash-blur-bg"></div><h1 class="splash-blur-content">Make an Egg using Canvas 2D API</h1></div><section class="square-container"><div class="egg-canvas-2d"><canvas width="760" height="760"></canvas></div></section><p> We've looked into making a fried egg with HTML, CSS, SVG. Easy stuff you say? This time we get our hands dirty and go all the way with Javascript! </p><p> For that we use the <span class="inline-code">canvas</span> element that exposes a 2D rendering engine to Javascript. </p><pre>      <code><span class="token comment">// Query the canvas from the DOM tree  </span>
<span class="token keyword">const</span> canvas <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the 2D context for the canvas</span>
<span class="token keyword">const</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
    </pre><p> All we do is query the canvas element and use it to request the '2D' rendering context. We save this reference for later as we will need it to execute drawing commands. </p><pre>      <code><span class="token keyword">const</span> size <span class="token operator">=</span> container<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width<span class="token punctuation">;</span>
<span class="token keyword">const</span> scale <span class="token operator">=</span> size <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token comment">// make it a square by applying the width as the height</span>
canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> size<span class="token punctuation">;</span>
canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> size<span class="token punctuation">;</span></code>
    </pre><p> This config step seems a bit more involved but it is in a way similar to setting the viewbox in a SVG as seen in a <a href="/canvas-2d" aria-current="page" class="link router-link-exact-active router-link-active"> previous chapter </a>. </p><p> We get the size of the parent container and set it to the canvas. Be aware this operation does not set the computed on screen size of the canvas, instead it sets the pixel density of the rendered image. </p><p> For example, a canvas could have a width attribute value of 500 units, but a 250px width in CSS. In this case your canvas would have a pixel density of 2 per pixel and probably well suited for retina displays. </p><p> This type of situation can be handled by checking the value of <span class="inline-code">window<span class="token punctuation">.</span>devicePixelRatio</span>. Now keep in mind the higher it is, the more pixel there are to render and it can quickly have an impact on performance. With great power comes great responsibility. Note how we define a scale ratio using 100 as a base, we will come back to it shortly. </p><p> The rest of the code is fairly straightforward. Each time we want to make a draw operation, we set the main settings first: <br><span class="inline-code">fillStyle</span> - background color, <br><span class="inline-code">stroke</span> - border color, <br><span class="inline-code">lineWidth </span> - border size etc... <br> With these we can draw a pink rectangle for the background, and a yellow circle for the yolk. </p><p> Now remember the earlier chapter on <a href="/svg-path" class="link"> SVG Paths </a>? We used a string of commands to define our egg path. Here we do the exact same thing but instead do it with Javascript variables: </p><pre>      <code><span class="token comment">// Our path was draw in a 100x100 square but now,</span>
<span class="token comment">// we're drawing to a scaled canvas</span>
<span class="token comment">// so we need to adjust our scale</span>
context<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span>scale<span class="token punctuation">,</span> scale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Let's start drawing the path</span>
context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span><span class="token number">48</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">76</span><span class="token punctuation">,</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">79</span><span class="token punctuation">,</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span><span class="token number">83</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">84</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span><span class="token number">86</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">68</span><span class="token punctuation">,</span><span class="token number">94</span><span class="token punctuation">,</span> <span class="token number">57</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">86</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">bezierCurveTo</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// We're done drawing, let's reset the scale for later</span>
context<span class="token punctuation">.</span><span class="token function">restore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code>
    </pre><p> The only caveat we need to deal here is that our path string (or coordinates) were generated under a 100 by 100 unit viewport. That is why before executing the drawing commands, we scale the entire context using the scale ratio calculated earlier. </p><p> Before scaling the context, we save its initial state. Once we're done with drawing operations, we can restore the context to before the scale alteration. </p><p> We used the bezierCurveTo command here. Alternatively we could also have drawn the same shape with a single drawing command and using the same string as we did previously in SVG. </p><pre>      <code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Path2D</span><span class="token punctuation">(</span><span class="token string">'M35,20 C48,7 76,17 79,31 C83,45 81,56 84,68 C86,80 68,94 57,90 C45,86 27,87 23,77 C17,55 23,33 35,20 Z'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span></code>
    </pre><p> As you can see, canvas unleashes the power of Javascript and we can have much more dynamic drawings compared to our HTML/CSS and SVG eggs. The drawback however is that we now have to put more effort in managing the responsive behavior of our canvas and its resolution. </p><section class="square-container"><div class="egg-canvas-2d"><canvas width="760" height="760"></canvas></div></section><p> At some point you may evolve into an egg frying degenerate and might even start cooking hundreds of them, every 16 milliseconds. That's when you start looking for more dedicated tools and tap into the power of the GPU. This is what we cover in the next section about <a href="/webgl-2d" class="link"> 2D drawing in WebGL </a></p><p><a href="https://github.com/mikatalk/vuevos/blob/main/src/eggs/EggCanvas2D.vue" class="btn"> Get the code and contribute. </a></p></div><footer><div class="nav-bar"><div class="splash-blur-back"></div><div class="links"><span><a href="/" class="router-link-active"><svg width="30px" height="30px" viewBox="0 0 44 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="vuevos-icon"><title>Vuevos.com</title><defs><filter id="shadow"><feDropShadow dx="0" dy="0" stdDeviation="0.3"></feDropShadow></filter></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path filter="url(#shadow)" d="M22.5,26.6780822 L32.4790419,9 L39,9 L22.5,38 L6,9 L12.5209581,9 L22.5,26.6780822 Z" fill="#FBF0F0"></path><path filter="url(#shadow)" d="M33,9 L22.5,28 L12,9 L19.5,9 L23,16 L26.5,9 L33,9 Z" fill="#FFD700"></path></g></g></svg></a><br><a href="/" class="router-link-active"> Home </a> | </span><a href="/html-css" class="">CSS</a> | <a href="/svg-path" class="">SVG Path</a> | <a href="/svg-filters" class="">SVG Filters</a> | <a href="/canvas-2d" class="router-link-exact-active router-link-active" aria-current="page">Canvas</a> | <a href="/webgl-2d" class="">WebGL 2D</a> | <a href="/webgl-3d" class="">WebGL 3D</a></div></div><p class="copyright"> Copyright © 2021 <a href="https://www.michael-iriarte.com/">@michael_iriarte</a></p></footer></div><script src="/js/chunk-vendors.js"></script><script src="/js/app.js"></script></body></html>