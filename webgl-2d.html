<!DOCTYPE html><html lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.png"><title>Vuevos (Vue + huevos)</title><meta name="title" content="Vuevos (Vue + huevos)"><meta name="description" content="Create a fried egg across various rendering Web APIs.
    Use Vue framework to navigate from one concept to another. Each fried egg (and its code) is encapsulated and available in its own component."><meta property="og:type" content="website"><meta property="og:url" content="https://vuevos.com"><meta property="og:title" content="Vuevos (Vue + huevos)"><meta property="og:description" content="Create a fried egg across various rendering Web APIs.
    Use Vue framework to navigate from one concept to another. Each fried egg (and its code) is encapsulated and available in its own component."><meta property="og:image" content="https://vuevos.com/social-wide.png"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://vuevos.com"><meta property="twitter:title" content="Vuevos (Vue + huevos)"><meta property="twitter:description" content="Create a fried egg across various rendering Web APIs.
    Use Vue framework to navigate from one concept to another. Each fried egg (and its code) is encapsulated and available in its own component."><meta property="twitter:image" content="https://vuevos.com/social-wide.png"><link href="/css/canvas-2d.css" rel="prefetch"><link href="/css/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.css" rel="prefetch"><link href="/css/css.css" rel="prefetch"><link href="/css/svg-path.css" rel="prefetch"><link href="/css/svg.css" rel="prefetch"><link href="/css/webgl-2d.css" rel="prefetch"><link href="/css/webgl-3d.css" rel="prefetch"><link href="/js/canvas-2d.js" rel="prefetch"><link href="/js/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.js" rel="prefetch"><link href="/js/css.js" rel="prefetch"><link href="/js/svg-path.js" rel="prefetch"><link href="/js/svg.js" rel="prefetch"><link href="/js/webgl-2d.js" rel="prefetch"><link href="/js/webgl-2d~webgl-3d.js" rel="prefetch"><link href="/js/webgl-3d.js" rel="prefetch"><link href="/css/app.css" rel="preload" as="style"><link href="/css/chunk-vendors.css" rel="preload" as="style"><link href="/js/app.js" rel="preload" as="script"><link href="/js/chunk-vendors.js" rel="preload" as="script"><link href="/css/chunk-vendors.css" rel="stylesheet"><link href="/css/app.css" rel="stylesheet"><link rel="stylesheet" type="text/css" href="/css/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.css"><script charset="utf-8" src="/js/canvas-2d~css~svg~svg-path~webgl-2d~webgl-3d.js"></script><script charset="utf-8" src="/js/webgl-2d~webgl-3d.js"></script><link rel="stylesheet" type="text/css" href="/css/webgl-2d.css"><script charset="utf-8" src="/js/webgl-2d.js"></script><script data-ad-client="ca-pub-9675727214970019" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XFKCM6QVRL"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-XFKCM6QVRL');
</script></head><body><div id="vuevos"><div class="nav-bar"><div class="splash-blur-back"></div><div class="links"><span><a href="/" class="router-link-active"><svg width="30px" height="30px" viewBox="0 0 44 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="vuevos-icon"><title>Vuevos.com</title><defs><filter id="shadow"><feDropShadow dx="0" dy="0" stdDeviation="0.3"></feDropShadow></filter></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path filter="url(#shadow)" d="M22.5,26.6780822 L32.4790419,9 L39,9 L22.5,38 L6,9 L12.5209581,9 L22.5,26.6780822 Z" fill="#FBF0F0"></path><path filter="url(#shadow)" d="M33,9 L22.5,28 L12,9 L19.5,9 L23,16 L26.5,9 L33,9 Z" fill="#FFD700"></path></g></g></svg></a> | </span><a href="/html-css" class="">CSS</a> | <a href="/svg-path" class="">SVG Path</a> | <a href="/svg-filters" class="">SVG Filters</a> | <a href="/canvas-2d" class="">Canvas</a> | <a href="/webgl-2d" aria-current="page" class="router-link-exact-active router-link-active">WebGL 2D</a> | <a href="/webgl-3d" class="">WebGL 3D</a></div></div><div class="view view-webgl-2d"><div class="title-box splash-blur"><div class="splash-blur-bg"></div><h1 class="splash-blur-content">Make an Egg using WebGL 2D </h1></div><section class="square-container"><div class="egg-webgl-2d"><canvas width="760" height="760"></canvas></div></section><p> Got tired of the CPU yet, maybe the CPU got tired of your script? Time to move up to the WebGL and unleash the power of the GPU! </p><p> One common mis-conception about WebGL is that it's for 3D only. In a way it is true as the 3D rendering pipeline is part of the core architecture of WebGL with it vertex and fragment shaders. But it's also very powerful at rendering 2D layers, stacked and blended on top of each others. </p><p> Because the WebGL API is pretty low level and boilerplate code can become cumbersome. We will try to avoid confusion by using the popular framework <a href="https://github.com/mikatalk/vuevos/blob/main/src/eggs/EggSVGFilters.vue" class="link"> Three.js</a> and try focusing essentialy on the fragment shader. </p><p> Have you ever stumbled upon <a href="https://www.shadertoy.com/" class="link"> ShaderToy</a> website and wondered how the heck it worked? This site uses WebGL to render a 3D quad on the screen. From there it focuses only on the fragment shader to draw on a 2D canvas. </p><p> You may think it's an odd way to overcomplicate graphics rendering for a 2D output, and you would probably be right. </p><p> But let's look at it from this perspective: A quad is two triangles. If you can draw on triangles you can draw on anything in 3D. This is a great way to get started with WebGL by putting aside some of the complexity of 3D while getting comfortable with using its shader language GLSL. </p><p> With that said let's jump in the code and set up a Three JS 2d scene using the OrthographicCamera. <span class="inline-code"><span class="token constant">THREE</span><span class="token punctuation">.</span>OrthographicCamera</span> because it allows us to define our own shaders. </p><pre>      <code><span class="token keyword">const</span> camera <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>OrthographicCamera</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> scene <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Scene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>WebGLRenderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>canvas<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">setPixelRatio</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>devicePixelRatio<span class="token punctuation">)</span><span class="token punctuation">;</span>
renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>scene<span class="token punctuation">,</span> camera<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Create quad</span>
<span class="token keyword">const</span> geometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>PlaneGeometry</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> material <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>ShaderMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> mesh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span> geometry<span class="token punctuation">,</span> material <span class="token punctuation">)</span><span class="token punctuation">;</span>
scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span><span class="token punctuation">;</span></code>
    </pre><p> ThreeJS allows us to get the ball rolling real quick! We create a camera, a scene and a renderer. Then we add a quad to the scene. </p><p> Note that the quad mesh is composed of a Plane geometry and a Shader material. We use <span class="inline-code"><span class="token constant">THREE</span><span class="token punctuation">.</span>ShaderMaterial</span> because it allows us to define our own shaders. </p><p> Since we're just interested in modifying the rendered pixel and not affect the actual geometry at all we use a boilerplate vertex shader: </p><pre>      <code>varying vec2 vUv<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  vUv <span class="token operator">=</span> uv<span class="token punctuation">;</span>
  gl_Position <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code>
    </pre><p>The vertex shader has two jobs: Calculating the position of the pixel on the quad and sending the UV variable to the fragment shader using varying variables (shared variables across fragment and vertex shaders). </p><p> Fragment shaders are executed over every pixel of your fried egg. The reason they are so powerful is because they are executed in parallel in your GPU. </p><p> Running an execution in parallel makes you think about your code from a different perspective and because of its architecture the variable types and data strutures are different than what you may be used to in JS land. </p><pre>      <code>varying vec2 vUv<span class="token punctuation">;</span>

float <span class="token function">draw_circle_gradient</span><span class="token punctuation">(</span><span class="token parameter">vec2 coord<span class="token punctuation">,</span> float radius</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token function">length</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span><span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

float <span class="token function">draw_circle</span><span class="token punctuation">(</span><span class="token parameter">vec2 coord<span class="token punctuation">,</span> float radius</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token function">length</span><span class="token punctuation">(</span>coord<span class="token punctuation">)</span><span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
  vec3 pink <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.41</span><span class="token punctuation">,</span> <span class="token number">0.71</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vec3 white <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vec3 yellow <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.84</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vec3 yellowDark <span class="token operator">=</span> <span class="token function">vec3</span><span class="token punctuation">(</span><span class="token number">0.98</span><span class="token punctuation">,</span><span class="token number">0.82</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  vec2 p <span class="token operator">=</span> <span class="token operator">-</span> <span class="token number">1.0</span> <span class="token operator">+</span> <span class="token number">2.0</span> <span class="token operator">*</span> vUv<span class="token punctuation">;</span>
  float circle <span class="token operator">=</span> <span class="token function">draw_circle_gradient</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token function">vec2</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  circle <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>circle<span class="token punctuation">,</span> <span class="token function">draw_circle_gradient</span><span class="token punctuation">(</span>p <span class="token operator">+</span><span class="token function">vec2</span><span class="token punctuation">(</span><span class="token number">0.35</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.35</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  circle <span class="token operator">=</span> <span class="token function">mix</span><span class="token punctuation">(</span>circle<span class="token punctuation">,</span> <span class="token function">draw_circle_gradient</span><span class="token punctuation">(</span>p <span class="token operator">+</span><span class="token function">vec2</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.3</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.35</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vec3 color <span class="token operator">=</span> pink<span class="token punctuation">;</span>
  float eggWhite <span class="token operator">=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span><span class="token number">0.51</span><span class="token punctuation">,</span>circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>eggWhite <span class="token operator">&gt;</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    color <span class="token operator">=</span> white<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  float yolkOutline <span class="token operator">=</span> <span class="token function">draw_circle</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token function">vec2</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.35</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>yolkOutline <span class="token operator">&gt;</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    color <span class="token operator">=</span> yellowDark<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  float yolk <span class="token operator">=</span> <span class="token function">draw_circle</span><span class="token punctuation">(</span>p<span class="token operator">+</span><span class="token function">vec2</span><span class="token punctuation">(</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>yolk <span class="token operator">&gt;</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    color <span class="token operator">=</span> yellow<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  gl_FragColor <span class="token operator">=</span> <span class="token function">vec4</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code>
    </pre><p>Fragment shaders output is defined by the <span class="inline-code">main</span> function which role is to set the RGBA (red, green, blue, alpha) values of the pixel inside a variable called <span class="inline-code">gl_FragColor</span>. </p><section class="square-container"><div class="egg-webgl-2d"><canvas width="760" height="760"></canvas></div></section><p> This is of course just the tip of the iceberg. It is in no way optimized and was simplidief for readability. </p><p> If you want to learn more on the topic, I strongly recommend checking out the <a href="https://thebookofshaders.com/" class="link"> Book of Shaders </a> and even take it a step further and dig into signed distance functions as exlpained by <a href="https://www.iquilezles.org/www/articles/distfunctions/distfunctions.htm" class="link"> Inigo Quilez </a> in his incredibly useful articles. </p><p> As we just took a detour to look into a very specific use of WebGL, let's next continue frying eggs in <a href="/webgl-3d" class="link"> 3D using WebGL </a>. </p><p><a href="https://github.com/mikatalk/vuevos/blob/main/src/eggs/EggWebGL2D.vue" class="btn"> Get the code and contribute. </a></p></div><footer><div class="nav-bar"><div class="splash-blur-back"></div><div class="links"><span><a href="/" class="router-link-active"><svg width="30px" height="30px" viewBox="0 0 44 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="vuevos-icon"><title>Vuevos.com</title><defs><filter id="shadow"><feDropShadow dx="0" dy="0" stdDeviation="0.3"></feDropShadow></filter></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g><path filter="url(#shadow)" d="M22.5,26.6780822 L32.4790419,9 L39,9 L22.5,38 L6,9 L12.5209581,9 L22.5,26.6780822 Z" fill="#FBF0F0"></path><path filter="url(#shadow)" d="M33,9 L22.5,28 L12,9 L19.5,9 L23,16 L26.5,9 L33,9 Z" fill="#FFD700"></path></g></g></svg></a><br><a href="/" class="router-link-active"> Home </a> | </span><a href="/html-css" class="">CSS</a> | <a href="/svg-path" class="">SVG Path</a> | <a href="/svg-filters" class="">SVG Filters</a> | <a href="/canvas-2d" class="">Canvas</a> | <a href="/webgl-2d" class="router-link-exact-active router-link-active" aria-current="page">WebGL 2D</a> | <a href="/webgl-3d" class="">WebGL 3D</a></div></div><p class="copyright"> Copyright © 2021 <a href="https://www.michael-iriarte.com/">@michael_iriarte</a></p></footer></div><script src="/js/chunk-vendors.js"></script><script src="/js/app.js"></script></body></html>